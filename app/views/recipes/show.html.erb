<%= stylesheet_link_tag "recipe.css" %>
  <div class="wrapper">
    <h1>Recipe <%= @recipe.name %>
    </h1>
    <div class="recipe-container">
      <div>
        <h4>Preparation Time: <%= @recipe.preparation_time %>
        </h4>
        <h4>Cooking Time: <%= @recipe.cooking_time %>
        </h4>
        <h4>Steps go there...</h4>
      </div>
      <div>
    
      <%= form_for @recipe, url: public_toggle_user_recipe_path(@recipe), method: :patch, remote: true, authenticity_token: true, html: { class: 'toggle-form' } do |f| %>
        <div class="slider-container">
        <span class="switch-label">Public</span>
        <label class="switch">
          <%= f.check_box :public, { class: "toggle-switch" }, 0, 1 %>
          <span class="slider round"></span>
        </label>
      </div>
      <%= f.hidden_field :public, value: @recipe.public ? 0 : 1 %>
      <%= f.submit 'Toggle', class: 'hidden-submit', style: 'display: none;' %>
    <% end %>

      <div class="d-flex gap-5 mt-5 mb-5">
    <div>
      <%= link_to "Generate Shopping List", user_shopping_list_index_path(@recipe.user, @recipe), class: "generate-btn" %>
    </div>
    <% if can? :update, @recipe%>
      <div>
        <%= link_to "Add Ingredient", new_user_recipe_food_path(recipe_id: @recipe.id, user_id: @recipe.user.id), class: "ingrediant-btn" %>
      </div>
    <%end%>
  </div>
    <table class="details-table">
      <% if @recipe.recipe_foods.any? %>
         <thead class="details-head">
             <tr class="heading-name">
             <th>Food</th>
             <th>Quantity</th>
             <th>Value</th>
             <th>Action</th>
             </tr>
         </thead>
     
         <tbody>
         <% @recipe.recipe_foods.each do |fd|%>
         <tr class="data-details">
           <td><%= fd.food.name%></th>
           <td><%= fd.quantity%></td>
           <td>$<%= (fd.quantity.to_f * fd.food.price.to_f).round(2) %></td>
           <td>
           <% if can? :manage, @recipe %>
            <div class="delete-div">
             <%= button_to "Delete", user_recipe_food_path(@recipe.user, fd.id), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %>
             <%= link_to "Modify" , user_recipe_food_path(@recipe.user, @recipe.id, fd.id), class: "btn btn-primary" %>
           <%end%>
           </div>
           </td>
         </tr>
       
         </tbody>
         <%end%>
       <%end%>
     </table>
  </div>